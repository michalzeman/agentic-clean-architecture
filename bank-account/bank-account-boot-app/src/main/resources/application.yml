management:
  endpoints:
    web:
      exposure:
        include: health,info
  health:
    db:
      enabled: false

spring:
  application:
    name: bank-account-service

  data:
    redis:
      host: ${REDIS_DB:localhost}
      port: 6379
      database: 0

  # PostgreSQL datasource for message channel persistence
  datasource:
    url: jdbc:postgresql://${POSTGRES_DB:localhost}:5432/bank_db
    username: ${POSTGRES_USER:bank_user}
    password: ${POSTGRES_PASSWORD:bank_pass}
    driver-class-name: org.postgresql.Driver
    hikari:
      schema: bank-account
      maximum-pool-size: 20
      minimum-idle: 5
      connection-timeout: 20000
      idle-timeout: 300000
      max-lifetime: 1200000

  # Liquibase for database migrations
  liquibase:
    enabled: true
    change-log: classpath:db/changelog/db.changelog-bank-account.xml
    default-schema: public
    liquibase-schema: public

application:
  identifier: bank-account

# Spring Integration Redis configuration
# Provides centralized thread pool and poller configuration for message channels
app:
  integration:
    redis:
      enabled: true
      executor:
        core-pool-size: 10
        max-pool-size: 50
        thread-name-prefix: "message-channel-"
      poller:
        fixed-delay: 100
        max-messages-per-poll: 10

adapters:
  redis:
    stream:
      bank-account-events-stream: bank-account.event.bank-accounts
      bank-transaction-events-stream: bank-transaction.event.bank-transactions
      bank-transaction-events-consumer-group: bank-account-service
      bank-transaction-events-consumer-name: bank-account-consumer
